{% extends "base.html" %}

{% block title %}
  <title>FitBug: Select Columns to Analyze</title>
{% endblock %}

{% block styles %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style_columns.css') }}">
  <style>
    /* Modern checkbox styles */
    .checkbox-group {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      padding-left: 20px;
    }

    .checkbox-group label {
      margin: 8px 0;
      font-size: 16px;
      color: #5a3e1b;
      background-color: #f5f5dc;
      padding: 6px 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .checkbox-group input[type="checkbox"] {
      margin-right: 10px;
    }

    .checkbox-group label:hover {
      background-color: #eee8aa;
    }

    /* Back button style */
    .btn-secondary {
      background-color: #ccc;
      color: #333;
      margin-top: 10px;
      margin-right: 10px;
    }

    .btn-secondary:hover {
      background-color: #bbb;
    }
  </style>
{% endblock %}

{% block content %}
  <h2 class="main-heading">Select Columns to Analyze</h2>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% for category, message in messages %}
      <div class="alert alert-{{ category }}">{{ message }}</div>
    {% endfor %}
  {% endwith %}

  <div class="input-wrapper">
    <img src="{{ url_for('static', filename='images/ladybug_left.png') }}" class="bug-img left-bug" alt="Ladybug Left">

    <div class="container">
      <form method="POST" action="{{ url_for('select_columns') }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <label>Select the data column you want to analyze:</label><br>

        <div class="checkbox-group">
          {% for column in columns %}
            <label><input type="checkbox" name="columns" value="{{ column }}"> {{ column }}</label>
          {% endfor %}
        </div><br>

        <button type="submit" class="btn">Analyze Selected Column</button>
        <a href="{{ url_for('analyze') }}" class="btn btn-secondary">Back to Upload</a>
      </form>
    </div>

    <img src="{{ url_for('static', filename='images/ladybug_right.png') }}" class="bug-img right-bug" alt="Ladybug Right">
  </div>
{% endblock %}
