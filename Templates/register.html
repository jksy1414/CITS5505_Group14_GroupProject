{% extends 'base.html' %}

{% block title %}
    Sign Up - FitBug
{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style_account.css') }}">
{% endblock %}

{% block content %}    
<div class="card" style="max-width: 500px; margin: 60px auto; padding: 30px;">
    <h3 class="mb-4 text-center">Register your new account!</h3>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="alert alert-warning">
                {% for msg in messages %}
                    {{ msg }}
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- Flask-WTF Registration Form -->
    <form method="POST" action="{{ url_for('auth.register') }}">
        {{ form.hidden_tag() }}

        <div class="mb-3">
            {{ form.username.label }}<br>
            {{ form.username(class="form-control") }}
        </div>

        <div class="mb-3">
            {{ form.password.label }}<br>
            {{ form.password(class="form-control", id="new_password") }}
            <div id="strength-indicator" class="form-text fw-bold"></div>
        </div>

        <div class="mb-3">
            {{ form.confirm_password.label }}<br>
            {{ form.confirm_password(class="form-control", id="confirm_password") }}
        </div>

        <div id="error-message" class="text-danger fw-bold mb-2"></div>

        <div class="mb-3">
            {{ form.email.label }}<br>
            {{ form.email(class="form-control") }}
        </div>

        <div class="mb-3">
            {{ form.height.label }}<br>
            {{ form.height(class="form-control") }}
        </div>

        <div class="mb-3">
            {{ form.weight.label }}<br>
            {{ form.weight(class="form-control") }}
        </div>

        <div class="mb-3">
            {{ form.dob.label }}<br>
            {{ form.dob(class="form-control") }}
        </div>

        <div class="mb-3">
            {{ form.submit(class="btn btn-success w-100") }}
        </div>
    </form>

    <p class="mt-3 text-center">Already have an account? <a href="{{ url_for('auth.login') }}">Go to login</a></p>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/password_validate.js') }}"></script>
{% endblock %}
